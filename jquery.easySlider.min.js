/*
* 	Easy Slider 1.8.2 - jQuery plugin
*	Originally written by Alen Grakalic	
*	http://cssglobe.com/post/4004/easy-slider-15-the-easiest-jquery-plugin-for-sliding
*
*	Copyright (c) 2009 Alen Grakalic (http://cssglobe.com)
*	Copyright (c) 2011 Solutions Nitriques (http://www.nitriques.com/open-source/)
*	Dual licensed under the MIT (MIT-LICENSE.txt)
*	and GPL (GPL-LICENSE.txt) licenses.
*
*	Built for jQuery library
*	http://jquery.com
*
*   Modified by Solutions Nitriques from
*   http://cssglobe.com/post/5780/easy-slider-17-numeric-navigation-jquery-slider
*   - added the autoSizeContainer property
*   - added the possibility to specify a function as the items number
*   - added a return value for the beforeChange callback that can cancel the event
*   - added a speedConstant option
*   - added an offset
*   - added a start option
*   - added a margin between items
*   - added beforeChange and afterChange listener options
*   - added li as the only valid node
*   - added a safeDivide function, to prevent divide by 0
*   - added a queue parameter
*   - added a afterInit and beforeInit listener
*   - added a nextPrevShow properties
*   - added support for numeric and next-prev at the same time
*   - added support for easing equations
*   - added a condition before starting the timeout : more than 1 elem
*   - added public commands for start and stop functions
*   - refactoring how the timer works
*   - added an array for storing data related to each instance
*/

/*
*	markup example for $("#slider").easySlider();
*	
* 	<div id="slider">
*		<ul>
*			<li><img src="images/01.jpg" alt="" /></li>
*			<li><img src="images/02.jpg" alt="" /></li>
*			<li><img src="images/03.jpg" alt="" /></li>
*			<li><img src="images/04.jpg" alt="" /></li>
*			<li><img src="images/05.jpg" alt="" /></li>
*		</ul>
*	</div>
*
*/
(function(e){var b=new Date().getTime(),a="easySlider",d=[];e.easySlider={defaults:{prevId:"prevBtn",prevText:"Previous",nextId:"nextBtn",nextText:"Next",controlsShow:true,controlsBefore:"",controlsAfter:"",controlsFade:true,firstId:"firstBtn",firstText:"First",firstShow:false,lastId:"lastBtn",lastText:"Last",lastShow:false,vertical:false,speed:800,speedConstant:false,auto:false,pause:2000,continuous:false,numeric:false,numericId:"controls",offsetWidth:0,offsetHeight:0,autoSizeContainer:true,start:0,items:1,itemsMargin:0,beforeChange:null,afterChange:null,afterInit:null,nextPrevShow:true,queue:false,easing:e.easing.def}};e.fn.easySlider=function(g){if(typeof g=="string"){}else{g=e.extend({},e.easySlider.defaults,g)}function i(l,k){if(l&&k){return l/k}return 0}function f(l,k){return e("li",l).width()+2*k}function h(k){if(e.isFunction(k.items)){return k.items()}return k.items}function j(k,l){return l.continuous?k-1:k-h(l)}if(!this.length){return this}return this.each(function(){var u=e(this),x=e("li",u).length,q=f(u,g.itemsMargin),l=g.offsetWidth,k=g.offsetHeight,E=u.height(),D=h(g)<1?1:h(g),z=false,v=0,y=u.data(a);if(y){var C=g;g=d[y].options;v=d[y].t;x=d[y].s;q=f(u,g.itemsMargin);switch(C){case"start":F();break;case"stop":o();break;case"next":m("next",false);break;case"prev":m("prev",false);break;default:if(!isNaN(C)){var G=parseInt(C,10);if(v!=G){v=G;m(v,false)}break}if(console){console.log(a+": command unknow")}break}return}y=(b++).toString();u.data(a,y);d[y]={timer:b,options:g,t:v,s:x};if(g.autoSizeContainer){if(g.vertical){u.width(q+l)}else{u.width((q*D)+l)}if(g.vertical){u.height((E*D)+k)}else{u.height(E+k)}}u.css("overflow","hidden");e("ul",u).width(g.vertical?q+l:(x*q)+l).height(g.vertical?(x*E)+k:E+k);e("ul",u).css("margin-left",i(l,2));e("li",u).width(q).height(E);if(g.continuous){e("ul",u).prepend(e("ul li:last-child",u).clone().css("margin-left","-"+q+"px"));for(c=0;c<D;c+=1){var B="ul li:nth-child("+(c+2)+")";e("ul",u).append(e(B,u).clone())}e("ul",u).css("width",(x+D)*q)}if(!g.vertical){e("li",u).css("float","left")}if(g.controlsShow){var r=g.controlsBefore;if(g.numeric){r+='<ol id="'+g.numericId+'"></ol>'}if(g.nextPrevShow){if(g.firstShow){r+='<span id="'+g.firstId+'"><a href="javascript:void(0);">'+g.firstText+"</a></span>"}r+=' <span id="'+g.prevId+'"><a href="javascript:void(0);">'+g.prevText+"</a></span>";r+=' <span id="'+g.nextId+'"><a href="javascript:void(0);">'+g.nextText+"</a></span>";if(g.lastShow){r+=' <span id="'+g.lastId+'"><a href="javascript:void(0);">'+g.lastText+"</a></span>"}}r+=g.controlsAfter;e(u).after(r);if(g.numeric){for(var D=0;D<x;D++){e(document.createElement("li")).attr("id",g.numericId+(D+1)).html("<a rel="+D+' href="javascript:void(0);">'+(D+1)+"</a>").appendTo(e("#"+g.numericId)).click(function(){m(parseInt(e("a",this).attr("rel")),true)})}}if(g.nextPrevShow){e("#"+g.nextId).click(function(){m("next",true)});e("#"+g.prevId).click(function(){m("prev",true)})}if(g.lastShow){e("#"+g.firstId).click(function(){m("first",true)})}if(g.firstShow){e("#"+g.lastId).click(function(){m("last",true)})}}function n(s){s=parseInt(s)+1;e("li#"+g.numericId).removeClass("current");e("li#"+g.numericId+s).addClass("current")}function A(){v=d[y]?d[y].t:v;x=d[y]?d[y].s:x;ts=j(x,g);if(v>ts){v=0}if(v<0){v=ts}d[y].t=v;if(!g.vertical){e("ul",u).css("margin-left",(v*q*-1)+i(l,2))}else{e("ul",u).css("margin-left",(v*E*-1))}if(!g.continuous&&g.controlsFade){if(v==ts){e("#"+g.nextId).hide();e("#"+g.lastId).hide()}else{e("#"+g.nextId).show();e("#"+g.lastId).show()}if(v==0){e("#"+g.prevId).hide();e("#"+g.firstId).hide()}else{e("#"+g.prevId).show();e("#"+g.firstId).show()}}if(g.numeric){n(v)}z=true}function m(t,w){if(z||!w){z=false;v=d[y]?d[y].t:v;x=d[y]?d[y].s:x;g=d[y]?d[y].options:g;ts=j(x,g);var H=v;switch(t){case"next":v=(H>=ts)?(g.continuous?v+1:ts):v+1;break;case"prev":v=(v<=0)?(g.continuous?v-1:0):v-1;break;case"first":v=0;break;case"last":v=ts;break;default:v=t;break}var s=true;if(e.isFunction(g.beforeChange)){s=g.beforeChange(v,H,x,u)}if(s){d[y].t=v;e("li","#"+g.numericId).removeClass("current");var J=Math.abs(H-v);var I=g.speedConstant?g.speed:J*g.speed;if(!g.vertical){p=(v*q*-1);e("ul",u).animate({marginLeft:p+i(l,2)},{queue:g.queue,duration:I,complete:A,easing:g.easing})}else{p=(v*E*-1);e("ul",u).animate({marginTop:p},{queue:g.queue,duration:I,complete:A,easing:g.easing})}if(w){o()}else{if(g.auto&&t=="next"&&d[y].timer){F(J*g.speed)}}if(e.isFunction(g.afterChange)){g.afterChange(v,H,x,u)}}}}function F(s){if(e.isNaN(s)){s=0}o();if(g.auto&&x>1){d[y].timer=setTimeout(function(){m("next",false)},g.pause+s)}}function o(){clearTimeout(d[y].timer);d[y].timer=null}if(g.numeric){n(v)}if(!g.continuous&&g.controlsFade){e("#"+g.prevId).hide();e("#"+g.firstId).hide()}if(e.isFunction(g.afterInit)){g.afterInit(x,u)}if(g.start){m(g.start,false);F()}else{if(e.isFunction(g.beforeChange)){g.beforeChange(0,0,x,u)}F();if(e.isFunction(g.afterChange)){g.afterChange(0,0,x,u)}}z=true})}})(jQuery);